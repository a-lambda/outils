---
title: "flat_outils.Rmd empty"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r development, include=FALSE}
library(testthat)
```

<!--
 You need to run the 'description' chunk in the '0-dev_history.Rmd' file before continuing your code there.
-->

```{r development-load}
# Load already included functions if relevant
pkgload::load_all(export_all = FALSE)
```

# get_working_files

The goal of this function is to find all R files that can contains functions written in R language.

The result is a vector of strings giving all the path to these R files relatively to the current directory.

Path containing `library` are omitted. 
    
```{r function-get_working_files}
#' Trouver les fichiers de travail R
#' 
#' Cette fonction recherche tous les fichiers R susceptibles de contenir des d√©finitions de fonction
#' 
#' @param path character giving the root searching path
#' @param recursive logical telling if the search shoud be recursive or not
#'
#' @return vector of path strings to the working R files
#' 
#' @export
get_working_files <- function(path = ".", recursive = TRUE){
    
  fichiers <- list.files(pattern = "[.](R|[R|r|Q|q]md)$", recursive = TRUE)
  resultat <- fichiers[!grepl("[/]library[/]", fichiers)]
  
  return(resultat)
  
}
```
  
```{r example-get_working_files}
get_working_files()
```
  
```{r tests-get_working_files}

working_files1 <- get_working_files()
working_files2 <- get_working_files(".")

test_that("get_working_files works", {
  expect_true(inherits(get_working_files, "function"))
  
  expect_equal(
    object = identical(working_files1, working_files2),
    expected = TRUE)

})
```
  

```{r development-inflate, eval=FALSE}
# Run but keep eval=FALSE to avoid infinite loop
# Execute in the console directly
fusen::inflate(flat_file = "dev/flat_outils.Rmd", vignette_name = "Minimal")
```
